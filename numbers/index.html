<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Game Solver</title>
    <style>
        :root {
            --primary: #2563eb;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background: var(--card);
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
        }

        h1 {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: #334155;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .inputs-row {
            display: flex;
            gap: 10px;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #cbd5e1;
            border-radius: 6px;
            font-size: 1.1rem;
            text-align: center;
            transition: border-color 0.2s;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: var(--primary);
        }

        .target-wrapper {
            background: #eff6ff;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #dbeafe;
        }

        button {
            width: 100%;
            padding: 12px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        button:hover {
            background-color: #1d4ed8;
        }

        #results {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #e2e8f0;
        }

        .solution-item {
            background: #f1f5f9;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 1.1rem;
            display: flex;
            justify-content: space-between;
        }

        .empty-msg {
            text-align: center;
            color: #64748b;
            font-style: italic;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Number Solver</h1>

    <div class="input-group">
        <label>Input Numbers (Up to 5)</label>
        <div class="inputs-row">
            <input type="number" class="num-input" placeholder="x">
            <input type="number" class="num-input" placeholder="y">
            <input type="number" class="num-input" placeholder="z">
            <input type="number" class="num-input" placeholder="a">
            <input type="number" class="num-input" placeholder="b">
        </div>
    </div>

    <div class="input-group target-wrapper">
        <label for="target">Target Number</label>
        <input type="number" id="target" placeholder="e.g. 456">
    </div>

    <button onclick="runSolver()">Find Solutions</button>

    <div id="results"></div>
</div>

<script>
    // Logic Class to hold value and the expression string used to get there
    class Node {
        constructor(value, expression) {
            this.value = value;
            this.expression = expression;
        }
    }

    function runSolver() {
        // 1. Get Inputs
        const inputs = Array.from(document.querySelectorAll('.num-input'))
            .map(input => parseInt(input.value))
            .filter(val => !isNaN(val)); // Filter out empty inputs

        const target = parseInt(document.getElementById('target').value);
        const resultsDiv = document.getElementById('results');
        
        resultsDiv.innerHTML = ''; // Clear previous results

        // Validation
        if (inputs.length === 0 || isNaN(target)) {
            resultsDiv.innerHTML = '<div class="empty-msg">Please enter source numbers and a target.</div>';
            return;
        }

        // 2. Initialize Solver
        const solutions = new Set(); // Use Set to avoid duplicate expression strings
        const initialNodes = inputs.map(n => new Node(n, n.toString()));

        // 3. Recursive Solve Function
        function solve(nodes) {
            // Check if any node in the current list hits the target
            for (let node of nodes) {
                if (node.value === target) {
                    solutions.add(node.expression);
                }
            }

            // If only one number left and it's not target, we are done with this branch
            if (nodes.length < 2) return;

            // Pick any two numbers (i and j)
            for (let i = 0; i < nodes.length; i++) {
                for (let j = 0; j < nodes.length; j++) {
                    if (i === j) continue;

                    const a = nodes[i];
                    const b = nodes[j];

                    // Create the list of remaining numbers (excluding a and b)
                    const remaining = nodes.filter((_, index) => index !== i && index !== j);

                    // Try all operations
                    // 1. Addition
                    recurse(remaining, a.value + b.value, `(${a.expression} + ${b.expression})`);

                    // 2. Multiplication
                    recurse(remaining, a.value * b.value, `(${a.expression} * ${b.expression})`);

                    // 3. Subtraction (only if positive result)
                    if (a.value > b.value) {
                        recurse(remaining, a.value - b.value, `(${a.expression} - ${b.expression})`);
                    }

                    // 4. Division (only if exact division)
                    if (b.value !== 0 && a.value % b.value === 0) {
                        recurse(remaining, a.value / b.value, `(${a.expression} / ${b.expression})`);
                    }
                }
            }
        }

        function recurse(remainingNodes, newValue, newExpr) {
            const nextNodes = [...remainingNodes, new Node(newValue, newExpr)];
            solve(nextNodes);
        }

        // Start Logic
        solve(initialNodes);

        // 4. Render Results
        if (solutions.size === 0) {
            resultsDiv.innerHTML = '<div class="empty-msg">No exact solutions found.</div>';
        } else {
            // Convert Set to Array, sort by length (simple ones first), and slice top 20
            const sortedSolutions = Array.from(solutions)
                .sort((a, b) => a.length - b.length)
                .slice(0, 50);

            resultsDiv.innerHTML = `<div>Found ${solutions.size} solution(s). Showing top ${sortedSolutions.length}:</div><br/>`;
            
            sortedSolutions.forEach(sol => {
                const div = document.createElement('div');
                div.className = 'solution-item';
                // Remove outer parens for cleaner look if present
                const cleanSol = sol.startsWith('(') && sol.endsWith(')') ? sol.slice(1, -1) : sol;
                div.innerHTML = `<span>${cleanSol}</span> <span>= ${target}</span>`;
                resultsDiv.appendChild(div);
            });
        }
    }
</script>

</body>
</html>
